<h1>Docs Demo</h1>

<p>
  This component provides you with a way to show example code. It also renders the actual template used to generate the example, so you don't have to worry about keeping the code snippet and the live example in sync.
</p>

<p>
  It's also an important part of your addon's testing story. If you write demos for most of your addon's functionality in your documentation app using this helper component, and then write acceptance tests against those demos, your acceptance tests will accomplish two things:
</p>

<ul>
  <li>
    They verify your addon's behavior
  </li>
  <li>
    They ensure all of that behavior is working in your docs site, and up-to-date with your addon's actual APIs
  </li>
</ul>

<p>
  This saves you from ever having to remember that second step of "updating the docs" every time you change your libary.
</p>

<p>
  Of course, if your addon's components have some edge cases that would muddle up your documentation site too much, you can fall back to using integration tests. But try to keep most of the behavior in the docs pages â€” that way your users will know about it.
</p>

<h2>Basic usage</h2>

<p>
  Let's look at a basic example:
</p>

{{#docs-demo as |demo|}}
  {{#demo.example}}
    <p>I am a <strong>handlebars</strong> template!</p>
    <p>The value is: {{val}}</p>
    <div>
      {{input value=val class='border'}}
    </div>
  {{/demo.example}}

  {{demo.snippet title="template.hbs" code='
  <p>I am a <strong>handlebars</strong> template!</p>
  <p>The value is: {{val}}</p>
  <div>
    {{input value=val class="border"}}
  </div>
  '}}
{{/docs-demo}}

<p>
  Here's the code that rendered the above demo (you can copy-paste this block to get going in your own app):
</p>

{{docs-snippet code='
  {{#docs-demo as |demo|}}
    {{#demo.example}}
      <p>I am a <strong>handlebars</strong> template!</p>
      <p>The value is: {{val}}</p>
      <div>
        {{input value=val class="border"}}
      </div>
    {{/demo.example}}

    {{demo.snippet title="template.hbs" code=\'
    <p>I am a <strong>handlebars</strong> template!</p>
    <p>The value is: {{val}}</p>
    <div>
      {{input value=val class="border"}}
    </div>
    \'}}
  {{/docs-demo}}'}}

<p>
  To explain,
</p>

<ul>
  <li><code>{docs-demo}</code> is the wrapping component
  </li>
  <li>
    The contextual component <code>{#demo.example}{/demo.example}</code> provides a wrapper to display your example. You'll pass a block to this component with the actual code you're demoing - for example, showing off how to use your button.
  </li>
  <li>
    You also need to pass a <code>name=</code> to demo.example in order to identify your snippet.
  </li>
  <li>
    Finally, the <code>{demo.snippet}</code> component lets you render different named snippets that you've identified via demo.example wrappers or other code comment blocks in your source.
  </li>
</ul>

<h2>Multiple snippets</h2>

<p>
  You can render multiple snippets to support your example. This can be useful when part of your example relies on code defined elsewhere, for example in a controller or stylesheet.
</p>

<p>
  Use a file extension to help docs-snippet identify and properly syntax highlight your snippet. Templates end in <code>.hbs</code>, JavaScript snippets end in <code>.js</code>, stylesheets in <code>.css</code> or <code>.scss</code>.
</p>

{{#docs-demo as |demo|}}
  {{#demo.example}}
    {{docs-dummy-example}}
  {{/demo.example}}

  {{demo.snippet title="template.hbs" code='
  <button onclick={{action "toggleIsShowing"}} class="docs-btn">
    Press me!
  </button>

  <p class="mt-4">
    {{#if isShowing}}
      Yep
    {{else}}
      Nope
    {{/if}}
  </p>
'}}
  {{demo.snippet title="component.js" code="
  import Component from '@ember/component';

  export default Component.extend({
    classNames: ['docs-dummy-example'],
    actions: {
      toggleIsShowing() {
        this.toggleProperty('isShowing');
      }
    }
  });
  "}}
{{/docs-demo}}

<h2>Custom Snippet Handling</h2>

<p>
  If you wish to override the inferred label or syntax highlighting for a snippet, you can specify <code>label</code> and <code>language</code> properties.
</p>

{{#docs-demo as |demo|}}
  {{#demo.example}}
  <pre>
  # Markdown
  - Has syntax highlighting, too
  </pre>
  {{/demo.example}}

  {{demo.snippet title="Source" code='
  {{#docs-demo as |demo|}}
    {{#demo.example name="docs-demo-custom.md"}}
      <pre>
      # Markdown
      - Has syntax highlighting, too
      </pre>
    {{/demo.example}}

    {{demo.snippet title="Source"}}
    {{demo.snippet title="My Custom Label"}}
  {{/docs-demo}}
  '}}
  {{demo.snippet title="My Custom Label" code='
  <pre>
  # Markdown
  - Has syntax highlighting, too
  </pre>
  '}}
{{/docs-demo}}
